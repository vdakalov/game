(function(){var d,a,c;d=function(a,b,c){return a.forEach((c||b).bind(b||this))};window.scope={services:{},controllers:[]};c=function(a){var b;b=a.split(/\s*:\s*/);a=b[0];b=b[1];return[a,b?b.split(/\s*,\s*/):[]]};a=function(c){var b;if(c in scope.services)return c=scope.services[c],b=[],d(c.services,function(c){return b.push(a(c))}),c.factory.apply(window,b)};window.controller=function(a,b){var f;f=c(a);return scope.controllers.push({name:f[0],services:f[1],handler:b})};window.service=function(a,b){var f;
f=c(a);return scope.services[f[0]]={services:f[1],factory:"function"===typeof b?b:function(){return b}}};window.onload=function(){return d(scope.controllers,function(c){var b;b=[];d(c.services,function(c){return b.push(a(c))});return c.handler.apply(window,b)})}}).call(this);
(function(){controller("main:el,MT16S2H2FLA,CharacterGenerator,Symbols,GraphicGenerator,GraphicObjects",function(d,a,c,e,b,f){var k,g,h,m,l;k=new e.Hexadecimal("A",5,"22a318fe31");g=new e.Hexadecimal("B",5,"f463e8c63e");h=new e.Hexadecimal("C",5,"746108422e");new e.Hexadecimal("DOT",2,"f");m=new e.ControlSymbol(c.CONTROL_SYMBOL_INCREMENT);e=new e.ControlSymbol(c.CONTROL_SYMBOL_NEWLINE);l=d.get("#graphic");l=new a(l);(new b(l)).render(new f.Circle([40,9,7]));d=d.get("#symbols");a=new a(d);c=new c(a,
16,2);c.printSymbol(k);c.printSymbol(m);c.printSymbol(g);c.printSymbol(e);return c.printSymbol(h)})}).call(this);
(function(){service("el:utils",function(d){return{isEl:function(a){return a instanceof HTMLElement},get:document.querySelector.bind(document),getAll:document.querySelectorAll.bind(document),make:function(a,c,e,b){var f;f=this.isEl(a)?a:document.createElement(a);d.each(c||{},function(b,c){return f.setAttribute(c,b)});"string"===typeof e&&(f.innerHTML=e);this.isEl(b)&&b.appendChild(f);return f},style:function(a,c,e){3===arguments.length&&(a.style[c]=e);return a.style[c]},styles:function(a,c){return d.each(c,
this,function(c,b){return a.style[b]=c})},"class":function(a,c,e){(new RegExp(c)).test(a.className);if(2<arguments.length){if(a.className=d.trim(a.className.replace(new RegExp("(^|s)"+c+"($|s)")," ")),!0===e)return a.className=d.trim(""+a.className+" "+c)}else return(new RegExp(c)).test(a.className)}}})}).call(this);
(function(){service("utils",{each:function(d,a,c){var e,b,f;e=0;1===arguments.length&&(b=[d,this,null],c=b[0],d=b[1],a=b[2]);2===arguments.length&&(b=[a,null],c=b[0],a=b[1]);if("object"===typeof d&&null!==d&&"function"===typeof c)for(f in d)b=d[f],!d.hasOwnProperty(f)||"length"===f&&d instanceof Array||(a?c.call(a,b,f,e++):c(b,f,e++));return d},grep:function(d,a,c){var e,b,f;1===arguments.length&&(f=[d,this,null],c=f[0],d=f[1],a=f[2]);2===arguments.length&&(f=[a,null],c=f[0],a=f[1]);b=(e=d instanceof
Array)?[]:{};this.each(d,a,function(f,d,h){if(!1!==c.call(a,f,d,h))return e?b.push(f):b[d]=f});return b},collect:function(d,a,c){var e,b;1===arguments.length&&(b=[d,this,null],c=b[0],d=b[1],a=b[2]);2===arguments.length&&(b=[a,null],c=b[0],a=b[1]);e=d instanceof Array?[]:{};this.each(d,a,function(b,d,g){b=a?c.call(a,b,d,g):c(b,d,g);if(!1!==b)return e[d]=b});return e},collectEntries:function(d,a,c){var e,b;1===arguments.length&&(b=[d,this,null],c=b[0],d=b[1],a=b[2]);2===arguments.length&&(b=[a,null],
c=b[0],a=b[1]);e={};this.each(d,a,function(b,d,g){b=a?c.call(a,b,d,g):c(b,d,g);if(!1!==b)return e[b[0]]=b[1]});return e},repeat:function(d,a,c){var e;2===arguments.length&&(e=[a,null],c=e[0],a=e[1]);return this.each(Array(d).join(".").split(/.?/),a,function(b,d,e){return a?c.call(a,e):c(e)})},trim:function(d){return d.replace(/^\s*|\s*$/g,"")},interval:function(d,a){return setInterval(a,d)},timeout:function(d,a){return setTimeout(a,d)},coord2index:function(d,a,c){return(c-1)*d+(a-1)},index2coord:function(d,
a){return[a%d+1,(a/d>>0)+1]},instanceOf:function(d,a){var c,e;if(d&&a)return c="function"===typeof d?d.prototype.constructor:d.constructor,e="function"===typeof a?a.prototype.constructor:a.constructor,c.name===e.name}})}).call(this);
(function(){service("MT16S2H2FLA:LiquidCrystal,MT16S2H2FLA_PIXEL",function(d,a){return function(){function c(c){this.build();this.mount(c)}c.prototype=new d;c.prototype.name="МЭЛТ MT-16S2H-2FLA";c.prototype.address="http://www.melt.com.ru/index.php?page=shop.product_details&product_id=6506&Itemid=6";c.prototype.borderColor="#555555";c.prototype.width=80;c.prototype.height=16;c.prototype.pixelSize=8;c.prototype.backlight="#FED04B";c.prototype.pixel=a;return c}()})}).call(this);
(function(){service("MT16S2H2FLA_PIXEL:el,BasePixel",function(d,a){return function(){function c(c,b,a){this.x=c;this.y=b;this.size=a;this.styles.common.width=""+this.size+"px";this.styles.common.height=""+this.size+"px";this.make()}c.prototype=new a;c.prototype.tagName="div";c.prototype.styles={common:{width:"4px",height:"4px",opacity:".1",background:"#444444"},active:{opacity:".9"}};return c}()})}).call(this);
(function(){service("CharacterGenerator:LiquidCrystal,Symbols,utils",function(d,a,c){return function(){function a(b,c,e){g=b;k=e;d=c}var b,d,k,g,h;a.CONTROL_SYMBOL_RESET="resetCursor";a.CONTROL_SYMBOL_NEWLINE="newLine";a.CONTROL_SYMBOL_INCREMENT="increment";d=k=g=null;b=[0,0];h={resetCursor:function(){return b=[0,0]},newLine:function(){b[0]=0;return b[1]=(b[1]+g.height/k)%g.height},increment:function(){return b[0]>=g.width/d*(d-1)?(b[0]=0,h.newLine()):b[0]+=g.width/d}};a.prototype.printSymbol=function(a){switch(a.type){case "control":h[a.command]();
break;default:c.each(a.mask,this,function(d,e,f){if(1===d)return e=c.index2coord(a.size,f),d=b[0]+e[0],e=b[1]+e[1],g.setPixel(d,e)}),h.increment()}};return a}()})}).call(this);
(function(){service("Symbols:utils",function(d){return{ControlSymbol:function(){function a(a){this.command=a}a.prototype.type="control";return a}(),Binary:function(){function a(a,d){this.name=a;this.mask=d}a.prototype.type="char";return a}(),Hexadecimal:function(){function a(a,b,d){this.name=a;this.size=b;this.mask=c(this.size,d)}var c;a.prototype.type="char";c=function(a,b){b=parseInt(b,16).toString(2);b=Array(Math.ceil(b.length/a)*a+1).join(0).replace(new RegExp("\\d{0,"+b.length+"}$"),b).split(/\0?/);
return this.mask=d.collect(b,function(a){return+a})};return a}()}})}).call(this);(function(){service("GraphicGenerator:utils,GraphicObject",function(d,a){return function(){function a(b){e=b}var e;e=null;a.prototype.render=function(a){a=a.render();return d.each(a,function(a){return e.setPixel(a[0],a[1])})};return a}()})}).call(this);
(function(){service("GraphicObjects:utils",function(d){return d.collect({Object:function(){return this.map},Line:function(){var a,c,e,b;a=[];b=Math.max(Math.abs(this.map[0][0]-this.map[1][0]),Math.abs(this.map[0][1]-this.map[1][1]));c=(this.map[1][0]-this.map[0][0])/b;e=(this.map[1][1]-this.map[0][1])/b;a.push(this.map[0]);d.repeat(b,function(b){b=a[b];return a.push([b[0]+c,b[1]+e])});return a},Circle:function(){var a,c,e,b,f;b=[];f=this.map;c=f[0];e=f[1];a=f[2];d.repeat(361,function(d){return b.push([c+
a*Math.sin(d+1),e+a*Math.cos(d+1)])});return b}},function(a,c){return function(){function c(a){this.map=a}c.prototype.render=a;return c}()})})}).call(this);
(function(){service("BasePixel:el",function(d){return function(){function a(){}var c;c={margin:"1px 0 0 1px","float":"left"};a.prototype.make=function(){this.el=d.make(this.tagName);d.styles(this.el,this.styles.common);return d.styles(this.el,c)};a.prototype.active=function(a){d.styles(this.el,!0===a?this.styles.active:this.styles.common);return d.styles(this.el,c)};return a}()})}).call(this);
(function(){service("LiquidCrystal:DefaultPixel,BasePixel,utils,el",function(d,a,c,e){return function(){function b(){}b.prototype=[];b.name="Unnamed";b.address="javascript:void(0);";b.borderColor="#000000";b.pixelSize=1;b.prototype.build=function(){return c.repeat(this.width*this.height,this,function(a){a=c.index2coord(this.width,a);return this.push(new this.pixel(a[0],a[1],this.pixelSize))})};b.prototype.mount=function(b){var d,g;e.styles(b,{width:""+((this.pixelSize+1)*this.width+1)+"px",height:""+
((this.pixelSize+1)*this.height+21)+"px",background:this.backlight,borderLeft:"4px solid "+this.borderColor,borderRight:"4px solid "+this.borderColor,borderBottom:"4px solid "+this.borderColor});g=e.make("a",{href:this.address,target:"_blank"},this.name,e.make("div",null,null,b)).parentNode;e.styles(g,{height:"20px",background:""+this.borderColor});e.styles(g.children.item(0),{color:"#FFFFFF",fontSize:"12px",fontFamily:"sans-serif",textDecoration:"none"});d=document.createDocumentFragment();c.each(this,
function(b){if(c.instanceOf(b,a))return d.appendChild(b.el)});return b.appendChild(d)};b.prototype.clear=function(){return c.each(this,function(a){return a.active(!1)})};b.prototype.round=function(a){return Math.round(a)};b.prototype.setPixel=function(a,b){return this.setIndex(c.coord2index(this.width,this.round(a),this.round(b)))};b.prototype.setIndex=function(a){if(a in this)return this[a].active(!0)};return b}()})}).call(this);
